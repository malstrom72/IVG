FORMAT IVG-1 requires:IMPD-1
BOUNDS 0,0,600,1000

reset
WIPE white
fill none
pen black width:1

// --- helpers (0-based args) ---
chord = call [
	pen gray width:0.6
	PATH svg:[M {$0} {$1} L {$2} {$3}]
]
markStart = call [ fill black; pen none; RECT {$0-2},{$1-2},4,4 ]
markEnd   = call [ fill none; pen black width:1; RECT {$0-2},{$1-2},4,4 ]
cell = call [
	context [
		offset $0,$1
		pen gray width:1
		RECT 0,0,300,200
		$2
	]
]

// -- #1
$cell 10 10 [
	$chord 50 100 250 100
	$markStart 50 100
	$markEnd 250 100
	pen black width:1
	PATH svg:[M 50 100 A 30 10 0 0 0 250 100]
]

// -- #2 (rotation 45°, shorter chord)
$cell 310 10 [
	$chord 60 100 240 100
	$markStart 60 100
	$markEnd 240 100
	pen black width:1
	PATH svg:[M 60 100 A 12 12 45 0 0 240 100]
]

// -- #3 (near-straight + acos clamp case)
$cell 10 210 [
	$chord 70 100 230 100
	$markStart 70 100
	$markEnd 230 100
	pen black width:1
	PATH svg:[M 70 100 A 100000 100000 0 0 1 230 100.000001]
]

// -- #4 (four flag combos)
$cell 310 210 [
	$chord 60 100 240 100
	$markStart 60 100
	$markEnd 240 100
	pen black width:1
	PATH svg:[M 60 100 A 35 25 0 0 0 240 100]
	PATH svg:[M 60 100 A 35 25 0 0 1 240 100]
	PATH svg:[M 60 100 A 35 25 0 1 0 240 100]
	PATH svg:[M 60 100 A 35 25 0 1 1 240 100]
]

// -- #5 (degenerate radii -> straight)
$cell 10 410 [
	$chord 70 100 230 100
	$markStart 70 100
	$markEnd 230 100
	pen black width:1
	PATH svg:[M 70 100 A 0 40 0 0 1 230 100]
]

// -- #6 (coincident endpoints)
$cell 310 410 [
	$markStart 150 100
	$markEnd 150 100
	pen black width:1
	PATH svg:[M 150 100 A 40 15 0 1 1 150 100]
]

// -- #7 (CW vs CCW)
$cell 10 610 [
	$chord 200 100 100 100
	$markStart 200 100
	$markEnd 100 100
	pen black width:1
	PATH svg:[M 200 100 A 50 50 0 0 1 100 100]
	PATH svg:[M 200 100 A 50 50 0 0 0 100 100]
]

// -- #8 (rotation ≈90°, tuned to avoid λ-scaling blow-up)
$cell 310 610 [
	$chord 50 100 250 100
	$markStart 50 100
	$markEnd 250 100
	pen black width:1
	PATH svg:[M 50 100 A 10 12 89.9999 0 1 250 100]
]

// -- #9 (tiny delta, large-arc=1 sweep=1)
$cell 10 810 [
	$chord 150 100 150.001 100
	$markStart 150 100
	$markEnd 150.001 100
	pen black width:1
	PATH svg:[M 150 100 A 40 40 0 1 1 150.001 100]
]

// -- #10 (rx!=ry + rotation; export sanity)
$cell 310 810 [
	$chord 70 50 230 150
	$markStart 70 50
	$markEnd 230 150
	pen black width:1
	PATH svg:[M 70 50 A 80 35 30 1 0 230 150]
]
